{% extends 'base.html' %}

{% block content %}

    <h3 class="text-center">Choose a Graphics Card</h3>

    <body>
        <div class="container">

            <div class="row">
                <div class="col-md-3">
                    <h4>Filter by:</h4>
                    <form method="GET">
                        <div class="mb-3">
                            <h5>Brand</h5>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="brandDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select brand
                                </button>
                                <div class="dropdown-menu" aria-labelledby="brandDropdown">
                                    {% for brand in brands %}
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="brand" value="{{ brand }}" id="{{ brand }}">
                                            <label class="form-check-label" for="{{ brand }}">
                                                {{ brand }}
                                            </label>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <h5>GPU Memory</h5>
                            <input class="form-control" type="text" name="gpu_memory" placeholder="Enter GPU memory">
                        </div>
                        <div class="mb-3">
                            <h5>GPU Clock</h5>
                            <input class="form-control" type="text" name="gpu_clock" placeholder="Enter GPU clock">
                        </div>
                        <div class="mb-3">
                            <h5>Price</h5>
                            <div class="input-group">
                                <span class="input-group-addon">$</span>
                                <input class="form-control" type="text" name="min_price" placeholder="Min price">
                                <span class="input-group-addon">to</span>
                                <input class="form-control" type="text" name="max_price" placeholder="Max price">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Apply filters</button>
                    </form>
                </div>
                <div class="col-md-9">
                    <h2>Graphics Cards</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Brand</th>
                                <th>Model</th>
                                <th>GPU Memory</th>
                                <th>GPU Clock</th>
                                <th>Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for graphics_card in graphics_cards %}
                                <tr>
                                    <td>{{ graphics_card.graphic_card_brand }}</td>
                                    <td>{{ graphics_card.graphic_card_model }}</td>
                                    <td>{{ graphics_card.graphic_card_chipset }}</td>
                                    <td>{{ graphics_card.graphic_card_base_clock }}</td>
                                    <td>${{ graphics_card.gpu_price }}</td>

                                    <td>
                                        <form action="/pc_builder">
                                            <input type="hidden" name="gpu_id" value="{{ graphics_card.id }}" id="gpu_id" />
                                            <button type="submit" class="btn btn-primary">Add</button>
                                        </form>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="5">No graphics cards found.</td>
                                </tr>
                            {% endfor %}

                        </tbody>

                        {% if graphics_cards.has_other_pages %}
                            <ul class="pagination justify-content-center">
                                {% if graphics_cards.has_previous %}
<li class="page-item">
<a class="page-link" href="?page=1" aria-label="First">
<span aria-hidden="true">Â«</span>
<span class="sr-only">First</span>
</a>
</li>
<li class="page-item">
<a class="page-link" href="?page={{ graphics_cards.previous_page_number }}" aria-label="Previous">
<span aria-hidden="true"><</span>
<span class="sr-only">Previous</span>
</a>
</li>
{% endif %}
{% for page_num in graphics_cards.paginator.page_range %}
{% if graphics_cards.number == page_num %}
    <li class="page-item active" aria-current="page">
        <span class="page-link">{{ page_num }} <span class="sr-only">(current)</span></span>
    </li>
{% else %}
    {% if page_num > graphics_cards.number|add:'-3' and page_num < graphics_cards.number|add:'3' %}
        <li class="page-item">
            <a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a>
        </li>
    {% endif %}
{% endif %}
{% endfor %}

{% if graphics_cards.has_next %}
<li class="page-item">
    <a class="page-link" href="?page={{ graphics_cards.next_page_number }}" aria-label="Next">
        <span aria-hidden="true">&gt;</span>
        <span class="sr-only">Next</span>
    </a>
</li>
<li class="page-item">
    <a class="page-link" href="?page={{ graphics_cards.paginator.num_pages }}" aria-label="Last">
        <span aria-hidden="true">&raquo;</span>
        <span class="sr-only">Last</span>
    </a>
</li>
{% endif %}
</ul>
{% endif %}
{% endblock %}
